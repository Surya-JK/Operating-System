#include <iostream>
using namespace std;

int main() {
    int pages[] = {1, 3, 0, 3, 5, 6, 3};
    int n = 7;
    int capacity = 3;
    int frames[3] = {-1, -1, -1};
    int faults = 0;

    for (int i = 0; i < n; i++) {
        bool hit = false;
        for (int j = 0; j < capacity; j++) {
            if (frames[j] == pages[i]) { hit = true; break; }
        }

        if (hit) continue;

        // Page Miss
        faults++;
        
        // If there is empty space, fill it
        bool placed = false;
        for(int j=0; j<capacity; j++) {
            if(frames[j] == -1) {
                frames[j] = pages[i];
                placed = true;
                break;
            }
        }
        if(placed) continue;

        // If full, find page to replace (Optimal logic)
        int farthest = -1, replaceIndex = -1;
        for (int j = 0; j < capacity; j++) {
            int nextUse = -1;
            for (int k = i + 1; k < n; k++) {
                if (frames[j] == pages[k]) {
                    nextUse = k;
                    break;
                }
            }
            // If page never used again, replace it immediately
            if (nextUse == -1) {
                replaceIndex = j;
                break;
            }
            // Otherwise find the one used farthest in future
            if (nextUse > farthest) {
                farthest = nextUse;
                replaceIndex = j;
            }
        }
        frames[replaceIndex] = pages[i];
    }

    cout << "Total Optimal Page Faults: " << faults << endl;
    return 0;
}
